!function(a){function b(a){return 1==a.nodeType?!d.contains(a.nodeName):!1}function c(a){for(var b=a.lastChild;b&&1!=b.nodeType&&b.previousSibling;)b=b.previousSibling;return b}var d=["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR","BASEFONT","BGSOUND","FRAME","ISINDEX"];Array.prototype.contains=function(a){for(var b=this.length;b--;)if(this[b]===a)return!0;return!1},a.setEndOfContenteditable=function(a){for(;c(a)&&b(c(a));)a=c(a);var d,e;document.createRange?(d=document.createRange(),d.selectNodeContents(a),d.collapse(!1),e=window.getSelection(),e.removeAllRanges(),e.addRange(d)):document.selection&&(d=document.body.createTextRange(),d.moveToElementText(a),d.collapse(!1),d.select())}}(window.cursorManager=window.cursorManager||{}),function(){function a(){function a(a){13===a.keyCode&&a.preventDefault()}function b(a){if(32===a.keyCode||13===a.keyCode)this.addBubble();else if(8===a.keyCode&&this.toDeleteFlag)this.removeLastBubble();else if(this.options.separator)for(var b=this.innerElement.innerText,c=0;c<this.options.separator.length;++c)if(-1!==b.indexOf(this.options.separator[c])){var d=b.replace(this.options.separator[c],"");d?this.addBubble(b.replace(this.options.separator[c],"")):(this.innerElement.innerText="",this.innerElement.focus());break}this.innerElement.innerText.trim()?this.toDeleteFlag=!1:this.toDeleteFlag=!0,h.keyup&&(h.keyup(a),cursorManager.setEndOfContenteditable(this.innerElement))}function c(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.setAttribute("tabindex",1),this.innerElement=document.createElement("div"),this.innerElement.setAttribute("contenteditable","true"),this.innerElement.className="ui-inner-editable",this.element.appendChild(this.innerElement),this.element.addEventListener("focus",function(){this.innerElement.focus()}.bind(this))}function d(){for(var a=[],b=this.element.childNodes,c=0;c<b.length;++c)1!=b[c].nodeType||b[c].getAttribute("contenteditable")&&"false"!==b[c].getAttribute("contenteditable")||a.push(b[c]);return a}function e(){this.innerElement.split("")}var f=[],g=[],h={add:null,clear:null,remove:null,bubbleClick:null,keyup:null};return this.init=function(d){if(null===d)throw new Error('Invalid parameter "options"!');if("undefined"==typeof d)throw new Error("Initializing without options!");if("undefined"!=typeof d.childNodes)this.options={element:d};else{if("Object"!=={}.toString.call(d).slice(8,-1))throw new Error('Invalid parameter "options"');if(this.options=d,null===d.element)throw new Error("Element was not found!");if("undefined"==typeof this.options.element)throw new Error("Initializing without element!");for(var f in h)this.options[f]&&"function"==typeof this.options[f]&&(h[f]=this.options[f])}this.element=this.options.element,this.options.height||(this.options.height=30),this.options.width||(this.options.width=370),this.element.style.minHeight=this.options.height+"px",this.element.style.width=this.options.width+"px",c.call(this),this.innerElement.addEventListener("keyup",b.bind(this)),this.innerElement.addEventListener("keydown",a.bind(this)),this.innerElement.addEventListener("paste",e.bind(this))},this.on=function(a,b){if("string"!=typeof a||"function"!=typeof b)throw new Error("Invalid operation!");h[a]=b},this.trigger=function(a,b){if("string"!=typeof a)throw new Error("Invalid operation!");if(!h[a])throw new Error('Action "'+a+'" was not defined!');b?h[a](b):h[a]()},this.makeBubble=function(a){return'<span class="ui-bubble-content">'+a+'</span> | <span class="ui-bubble-remove">x</span>'},this.addBubble=function(a){var b=(a?a:this.innerElement.innerText).trim();if(b){var c=document.createElement("div");c.className="js-bubble-item ui-bubble",c.innerHTML=this.makeBubble(b),this.element.insertBefore(c,this.innerElement),f.push(b),g.push(c),c.querySelector(".ui-bubble-remove").addEventListener("click",this.removeBubble.bind(this)),this.innerElement.innerText="",this.innerElement.focus(),h.add&&h.add(c,b),h.bubbleClick&&c.addEventListener("click",h.bubbleClick)}},this.removeBubble=function(a){a.stopPropagation();var b=a.currentTarget.parentNode;this.element.removeChild(b),this.refreshData(),h.remove&&h.remove()},this.removeLastBubble=function(){if(g.length){f.pop();var a=g.pop();this.element.removeChild(a)}h.remove&&h.remove()},this.clear=function(){for(var a=d.call(this),b=0;b<a.length;++b)this.element.removeChild(a[b]);f=[],g=[],h.clear&&h.clear()},this.getValues=function(){return f},this.getBubbles=function(){return g},this.refreshData=function(){f=[],g=[];for(var a=d.call(this),b=0;b<a.length;++b)g.push(a[b]),f.push(a[b].querySelector(".ui-bubble-content").innerText)},function(a){return this.init(a),this}.bind(this)}window.inputBubbles=new a}(),function(){if("undefined"==typeof $)throw new Error("You must load jQuery library!");if("undefined"==typeof window.inputBubbles)throw new Error("InputBubbles native was not loaded!");$.fn.inputBubbles=function(a){if(this.length){var b=a?a:{};return b.element=this[0],this.inputBundles=inputBubbles(b),this}}}();